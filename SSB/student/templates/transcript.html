{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="tutor-sections-body">
  <div class="tutor-sections-page">
    <h1 class="section-header poppins-medium">
      <img class="icon" src="{% static 'icons/registration1.png' %}" alt="" />
      <strong>Academic Transcript</strong>
    </h1>

    {% if semester_data %}
    {% for semester in semester_data %}
    <div class="semester-container">
      <h2>Semester {{ semester.id }}, {{ semester.year }}</h2>
      {% if semester.grades %}
      <table class="sections-table">
        <thead>
          <tr>
            <th>Course Code</th>
            <th>Course Name</th>
            <th>Credits</th>
            <th>Grade</th>
          </tr>
        </thead>
        <tbody>
          {% for grade in semester.grades %}
          <tr>
            <td>{{ grade.registration.crn.course.department.department_code }}{{ grade.registration.crn.course.code }}
            </td>
            <td>{{ grade.registration.crn.course.name }}</td>
            <td>{{ grade.registration.crn.course.credit_hours }}</td>
            <td>{{ grade.grade }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <table class="sections-table">
        <thead>
          <tr>
            <th>Transcript Total</th>
            <th>Attempted Hours</th>
            <th>Passed Hours</th>
            <th>GPA</th>
        </thead>
        <tbody>
          <tr>
            <td>Current</td>

            <td>{{ semester.total_attempted_credits }}</td>
            <td>{{ semester.total_passed_credits }}</td>
            <td>{{ semester.gpa|floatformat:2 }}</td>
          </tr>
          <tr>
            <td>CGPA</td>
            <td> {{ overall_attempted_credits }}</td>
            <td> {{ overall_passed_credits }}</td>
            <td>{{ overall_gpa|floatformat:2 }}</td>
          </tr>
        </tbody>
      </table>
      {% else %}
      <p class="no-sections">No grades recorded for this semester.</p>
      {% endif %}
    </div>
    {% endfor %}
    {% else %}
    <p class="no-sections">No grades found for this student.</p>
    {% endif %}

    {%endblock%}